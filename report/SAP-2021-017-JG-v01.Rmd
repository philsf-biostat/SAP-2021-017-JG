---
title: "Plano Analítico para Otimização de hiperparâmetros de clusterização hierárquica para identificação de deputados evangélicos de corporações pentecostais eleitos em 2018"
subtitle: 'DOCUMENTO: SAP-2021-017-JG-v01'
author: '**De:** Felipe Figueiredo **Para:** Josir Gomes'
# date: yyyy-mm-dd
output:
  html_document:
    fig_caption: yes
    fig_height: 6
    fig_width: 6
    keep_md: yes
    number_sections: yes
    toc: yes
  pdf_document:
    number_sections: yes
    toc: yes
  word_document:
    fig_caption: yes
    fig_height: 6
    fig_width: 6
    reference_docx: misc/style_SAP_pt.docx
    toc: yes
toc-title: "Sumário"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_knit$set(root.dir = normalizePath(".."))
options(scipen = 999)
library(pander)
library(knitr)
library(philsfmisc)
panderOptions('table.style', 'rmarkdown')
panderOptions('table.split.table', 160)
```

---

**Plano Analítico para Otimização de hiperparâmetros de clusterização hierárquica para identificação de deputados evangélicos de corporações pentecostais eleitos em 2018**

**Histórico do documento**

```{r history}
Version <- c("01")
Changes <- c("Versão inicial")
history <- cbind(Version, Changes)
colnames(history) <- c("Versão", "Alterações")
# pander(history, split.cells = 70)
kable(history)
```

---

# Lista de abreviaturas

- d: Tamanho de efeito D de Cohen
- DP: Desvio padrão
- IC: Intervalo de confiança
- IIQ: Intervalo Interquartílico
- IMC: Índice de massa corpórea

# Contexto

Dados de deputados federais evangélicos, eleitos em 2018, com labels identificando quais pertencem a coporações pentecostais.
As corporações pentecostais foram definidas como as entidades evangélicas com interesse predominantemente financeiro e/ou político, diferenciando-se das instituições religiosas tradicionais.

As corporações pentecostais foram previamente identificadas na base de dados recebida.

## Objetivos

Identificar visualmente a seleção de hiperparâmetros que maximiza a silhueta média (global) do agrupamento hierárquico.

## Hipóteses

O agrupamento hierárquico pode ser usado para identificar os deputados evangélicos que pertencem a uma corporação pentecostal.

# Dados

```{r cleaning, include=FALSE}
source("scripts/input.R", encoding = 'UTF-8')
```

## Dados brutos

Base de dados recebida contendo características dos deputados federais eleitos em 2018.

## Tabela de dados analíticos

Todas as variáveis da tabela de dados analíticos foram identificadas de acordo com as descrições das variáveis, e os valores foram identificados de acordo com o dicionário de dados providenciado.
Estas identificações possibilitarão a criação de tabelas de resultados com qualidade de produção final.

Depois dos procedimentos de limpeza e seleção `r ncol(analytical)` variáveis foram incluídas na análise com `r nrow(analytical)` observações.
A Tabela 1 mostra a estrutura dos dados analíticos.

```{r analytical data}
analytical_mockup %>%
  pander(caption = "**Tabela 1** Estrutura da tabela de dados analíticos após seleção e limpeza das variáveis.")
```

A tabela de dados analíticos serão disponibilizados na versão privada do relatório, e serão omitidas da versão pública do relatório.

# Variáveis do estudo

## Desfechos primário e secundários

O desfecho primário está definido como a classificação entre deputados evangélicos pertencentes a alguma corporação pentecostal.

## Covariáveis

As seguintes características dos deputados federais serão consideradas para inclusão na análise: Receitas (divididas em AGP e outras fontes), número de votos recebidos, posicionamento político e capilaridade.
As seguintes características dos partidos serão consideradas para inclusão na análise: decil do número de deputados eleitos e decil do número de filiados.

# Métodos estatísticos

## Análises estatísticas

### Análise descritiva

O perfil epidemiológico dos participantes do estudo será descrito na baseline.
As características demográficas
(sexo, idade e IMC)
e clínicas
<!-- ( [vars] ) -->
serão descritas como
média (DP)
<!-- mediana (IIQ) -->
ou frequência e proporção (%), conforme apropriado.
As distribuições das caracerísticas dos participantes serão resumidas em tabelas e visualizadas em gráficos exploratórios

### Análise inferencial

Todas as comparações entre os grupos serão avaliadas como análises univariadas.
Variáveis contínuas serão comparadas entre os grupos com o
teste t de grupos independentes com a correção de Welch.
<!-- teste t pareado com a correção de Welch. -->
<!-- teste de Wilcoxon. -->
Diferenças nas distribuições de variáveis categóricas serão avaliadas com o teste
exato de Fisher.
<!-- qui-quadrado. -->
<!-- McNemar. -->

<!-- Todas as análises inferenciais serão realizadas com base nos modelos estatísticos (descritos na próxima seção). -->

### Modelagem estatística

Modelos de clusters hierárquico serão ajustados aos dados numéricos.
Será criado um algoritmo para percorrer o espaço de hiperparâmetros e calcular a silhueta de cada combinação.

Os índices de silhueta média serão visualizados em um gráfico de dispersão (silhueta por k).
Cada ponto será identificado pela métrica de distância e método de ligação (mapeados em cor e forma, respectivamente) para identificação visual da qualidade dos agrupamentos.
A combinação ótima será identificada textualmente, e outras combinações com valores de silhueta mais altos podem ser destacados.

Hiperparâmetros a ser avaliados:

- Número de clusters k: variando de 2 a 10
- Métricas de distância
    - Norma 2 (Euclidiana)
    - Norma 1 (Manhattan)
    - Norma infinito (máxima)
    - Norma p (Minkowski) com p = 0.5 e 1.5
    - Canberra
- Métodos de ligação (7 ou 8 métodos disponíveis, em duas implementações distintas)
    - Completa (máximo)
    - Single (mínimo)
    - Média (UPGMA)
    - Ward sem critério de Ward (1963)
    - Ward com critério de Ward (1963)
    - Mediana \*
    - Centróide \*

\* Os métodos de ligação por mediana e centróide podem gerar inversões na clusterização, e não serão selecionados na otimização.
Sua inclusão no algoritmo de otimização terá apenas fins informativos.

## Significância e Intervalos de Confiança

Todas as análises serão realizadas ao nível de significância de 5%.
Todos os testes de hipóteses e intervalos de confiança calculados serão
bicaudais.
<!-- unicaudais à esquerda. -->
<!-- unicaudais à direita. -->

## Tamanho da amostra e Poder


N/A

## Softwares utilizados

Esta análise será realizada utilizando-se o software `R` versão `r getRversion()`.

<!-- # Resultados -->

# Observações e limitações

<!-- # Conclusões -->

# Referências

- **SAR-2021-017-JG-v01** -- Otimização de hiperparâmetros de clusterização hierárquica para identificação de deputados evangélicos de corporações pentecostais eleitos em 2018
<!-- - Cohen, J. (1988). Statistical power analysis for the behavioral sciences (2nd Ed.). New York: Routledge. -->

# Apêndice

## Disponibilidade

Tanto este plano analítico como o relatório correspondente (**SAR-2021-017-JG-v01**) podem ser obtidos no seguinte endereço:

<https://philsf-biostat.github.io/SAR-2021-017-JG/>
